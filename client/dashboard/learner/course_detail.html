<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creative Art Design - EduPlus</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      /* ========== VARIABLES ========== */
      :root {
        /* Colors */
        --primary: #4361ee;
        --primary-light: #4895ef;
        --primary-dark: #3f37c9;
        --secondary: #f72585;
        --accent: #4cc9f0;
        --success: #38b000;
        --warning: #ffaa00;
        --danger: #ef233c;
        --light: #f8f9fa;
        --dark: #212529;
        --gray: #6c757d;
        --light-gray: #e9ecef;
        --white: #ffffff;
        --black: #000000;

        /* Spacing */
        --space-xs: 0.25rem;
        --space-sm: 0.5rem;
        --space-md: 1rem;
        --space-lg: 1.5rem;
        --space-xl: 2rem;

        /* Border Radius */
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;

        /* Shadows */
        --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
        --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.15);
        --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.2);

        /* Transitions */
        --transition-fast: 0.2s ease;
        --transition-normal: 0.3s ease;
        --transition-slow: 0.5s ease;
      }

      /* ========== BASE STYLES ========== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        scroll-behavior: smooth;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: var(--dark);
        background-color: var(--light);
      }

      img {
        max-width: 100%;
        height: auto;
        display: block;
      }

      a {
        text-decoration: none;
        color: inherit;
      }

      ul {
        list-style: none;
      }

      .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 var(--space-md);
      }

      /* ========== HEADER ========== */
      .course-header {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: var(--white);
        padding: var(--space-xl) 0;
        margin-bottom: var(--space-xl);
      }

      .header-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .course-title h1 {
        font-size: 2rem;
        margin-bottom: var(--space-sm);
      }

      .course-title p {
        opacity: 0.9;
        font-size: 1.1rem;
      }

      .course-progress {
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: var(--radius-lg);
        padding: var(--space-md);
        min-width: 300px;
      }

      .progress-text {
        display: flex;
        justify-content: space-between;
        margin-bottom: var(--space-xs);
        font-size: 0.9rem;
      }

      .progress-bar {
        height: 8px;
        background-color: rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: var(--space-xs);
      }

      .progress-fill {
        height: 100%;
        background-color: var(--white);
        border-radius: 4px;
        width: 65%;
      }

      .progress-meta {
        display: flex;
        justify-content: space-between;
        font-size: 0.8rem;
        opacity: 0.8;
      }

      .enroll-section {
        background-color: rgba(255, 255, 255, 0.1);
        border-radius: var(--radius-lg);
        padding: var(--space-md);
        min-width: 300px;
        text-align: center;
      }

      .course-price {
        font-size: 1.8rem;
        font-weight: 700;
        margin-bottom: var(--space-md);
      }

      .enroll-btn {
        display: inline-block;
        width: 100%;
        padding: var(--space-md);
        background-color: var(--success);
        color: var(--white);
        border-radius: var(--radius-md);
        font-weight: 600;
        transition: var(--transition-fast);
      }

      .enroll-btn:hover {
        background-color: #2e8b00;
      }

      /* ========== COURSE LAYOUT ========== */
      .course-layout {
        display: grid;
        grid-template-columns: 250px 1fr;
        gap: var(--space-xl);
        margin-bottom: var(--space-xl);
      }

      @media (max-width: 992px) {
        .course-layout {
          grid-template-columns: 1fr;
        }
      }

      /* Sidebar Navigation */
      .sidebar-nav {
        position: relative;
        top: var(--space-xl);
        height: fit-content;
      }

      .modules-menu {
        background-color: var(--white);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-sm);
        overflow: hidden;
      }

      .module-group {
        border-bottom: 1px solid var(--light-gray);
      }

      .module-group:last-child {
        border-bottom: none;
      }

      .group-header {
        padding: var(--space-md);
        background-color: var(--light);
        font-weight: 600;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
      }

      .group-header.active {
        color: var(--primary);
      }

      .group-header i {
        transition: transform var(--transition-fast);
      }

      .group-header.active i {
        transform: rotate(180deg);
      }

      .module-items {
        padding: 0;
        max-height: 0;
        overflow: hidden;
        transition: max-height var(--transition-normal);
      }

      .group-header.active + .module-items {
        max-height: 1000px;
      }

      .module-item {
        padding: var(--space-md);
        border-left: 3px solid transparent;
        transition: var(--transition-fast);
        display: flex;
        align-items: center;
        gap: var(--space-sm);
      }

      .module-item:hover {
        background-color: var(--light);
      }

      .module-item.active {
        border-left-color: var(--primary);
        background-color: var(--light);
        color: var(--primary);
      }

      .module-item.completed .item-title::before {
        content: "\f00c";
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
        color: var(--success);
        margin-right: var(--space-xs);
      }

      .module-item.locked {
        position: relative;
        opacity: 0.7;
      }

      .module-item.locked::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(255, 255, 255, 0.7);
      }

      .module-item.locked .item-lock {
        position: absolute;
        top: 50%;
        right: var(--space-md);
        transform: translateY(-50%);
        background-color: var(--danger);
        color: var(--white);
        padding: var(--space-xs) var(--space-sm);
        border-radius: var(--radius-sm);
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        gap: var(--space-xs);
      }

      .item-title {
        flex: 1;
      }

      .item-duration {
        color: var(--gray);
        font-size: 0.8rem;
      }

      /* Course Content */
      .course-content {
        background-color: var(--white);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-sm);
        padding: var(--space-xl);
      }

      .content-header {
        margin-bottom: var(--space-xl);
      }

      .content-header h2 {
        font-size: 1.8rem;
        margin-bottom: var(--space-sm);
      }

      .content-meta {
        display: flex;
        gap: var(--space-lg);
        color: var(--gray);
        font-size: 0.9rem;
        margin-bottom: var(--space-md);
      }

      .content-body {
        margin-bottom: var(--space-xl);
      }

      .content-body p {
        margin-bottom: var(--space-md);
        line-height: 1.7;
      }

      .content-footer {
        display: flex;
        justify-content: space-between;
        border-top: 1px solid var(--light-gray);
        padding-top: var(--space-md);
      }

      .btn {
        display: inline-flex;
        align-items: center;
        gap: var(--space-sm);
        padding: var(--space-sm) var(--space-md);
        border-radius: var(--radius-md);
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition-fast);
        border: none;
      }

      .btn-primary {
        background-color: var(--primary);
        color: var(--white);
      }

      .btn-primary:hover {
        background-color: var(--primary-dark);
      }

      .btn-outline {
        background-color: transparent;
        border: 1px solid var(--primary);
        color: var(--primary);
      }

      .btn-outline:hover {
        background-color: var(--primary);
        color: var(--white);
      }

      /* Video Player */
      .video-container {
        position: relative;
        padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
        height: 0;
        overflow: hidden;
        margin-bottom: var(--space-xl);
        border-radius: var(--radius-md);
        background-color: var(--black);
      }

      .video-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
      }

      .preview-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: var(--white);
        z-index: 1;
      }

      .preview-overlay i {
        font-size: 3rem;
        margin-bottom: var(--space-md);
      }

      .preview-overlay p {
        margin-bottom: var(--space-md);
        text-align: center;
        max-width: 80%;
      }

      /* Resources Section */
      .resources-section {
        background-color: var(--light);
        border-radius: var(--radius-md);
        padding: var(--space-md);
        margin-top: var(--space-xl);
      }

      .resources-section h3 {
        margin-bottom: var(--space-md);
        display: flex;
        align-items: center;
        gap: var(--space-sm);
      }

      .resource-item {
        display: flex;
        align-items: center;
        gap: var(--space-md);
        padding: var(--space-sm) 0;
        border-bottom: 1px solid var(--light-gray);
      }

      .resource-item:last-child {
        border-bottom: none;
      }

      .resource-icon {
        width: 40px;
        height: 40px;
        border-radius: var(--radius-sm);
        background-color: var(--primary-light);
        color: var(--white);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .resource-info {
        flex: 1;
      }

      .resource-info h4 {
        font-size: 0.95rem;
        margin-bottom: var(--space-xs);
      }

      .resource-info p {
        color: var(--gray);
        font-size: 0.8rem;
      }

      .download-btn {
        color: var(--primary);
        font-size: 1.2rem;
      }

      /* Completion Checkbox */
      .completion-section {
        display: flex;
        align-items: center;
        gap: var(--space-sm);
        margin-top: var(--space-xl);
        padding: var(--space-md);
        background-color: var(--light);
        border-radius: var(--radius-md);
      }

      .checkbox-container {
        display: flex;
        align-items: center;
        gap: var(--space-sm);
        cursor: pointer;
      }

      .custom-checkbox {
        width: 20px;
        height: 20px;
        border: 2px solid var(--gray);
        border-radius: var(--radius-sm);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: var(--transition-fast);
      }

      .checkbox-container input:checked + .custom-checkbox {
        background-color: var(--success);
        border-color: var(--success);
        color: var(--white);
      }

      .checkbox-container input {
        display: none;
      }

      /* Subscription Section */
      .subscription-section {
        background-color: var(--light);
        padding: var(--space-xl) 0;
        margin-bottom: var(--space-xl);
      }

      .section-title {
        text-align: center;
        margin-bottom: var(--space-xl);
      }

      .section-title h2 {
        font-size: 1.8rem;
        margin-bottom: var(--space-sm);
      }

      .section-title p {
        color: var(--gray);
        max-width: 600px;
        margin: 0 auto;
      }

      .pricing-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--space-lg);
        max-width: 900px;
        margin: 0 auto;
      }

      .plan-card {
        background-color: var(--white);
        border-radius: var(--radius-lg);
        padding: var(--space-xl);
        box-shadow: var(--shadow-sm);
        transition: var(--transition-normal);
        position: relative;
        overflow: hidden;
      }

      .plan-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-md);
      }

      .plan-card.popular::before {
        content: "Paling Populer";
        position: absolute;
        top: 15px;
        right: -30px;
        background-color: var(--secondary);
        color: var(--white);
        padding: var(--space-xs) var(--space-xl);
        font-size: 0.8rem;
        font-weight: 600;
        transform: rotate(45deg);
      }

      .plan-card h3 {
        font-size: 1.3rem;
        margin-bottom: var(--space-sm);
      }

      .price {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: var(--space-xs);
        color: var(--dark);
      }

      .price span {
        font-size: 1rem;
        font-weight: 400;
        color: var(--gray);
      }

      .sub-price {
        color: var(--gray);
        margin-bottom: var(--space-md);
        font-size: 0.95rem;
      }

      .benefits {
        margin: var(--space-lg) 0;
      }

      .benefits li {
        padding: var(--space-xs) 0;
        display: flex;
        align-items: center;
        gap: var(--space-sm);
      }

      .benefits li::before {
        content: "\f00c";
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
        color: var(--success);
      }

      .button-group {
        display: flex;
      }

      /* Discussion Section */
      .discussion-section {
        margin-top: var(--space-xl);
        background-color: var(--white);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-sm);
        padding: var(--space-xl);
      }

      .discussion-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-lg);
      }

      .discussion-header h3 {
        font-size: 1.3rem;
      }

      .discussion-form {
        margin-bottom: var(--space-xl);
      }

      .form-group {
        margin-bottom: var(--space-md);
      }

      .form-group label {
        display: block;
        margin-bottom: var(--space-xs);
        font-weight: 500;
      }

      .form-group textarea {
        width: 100%;
        padding: var(--space-md);
        border: 1px solid var(--light-gray);
        border-radius: var(--radius-md);
        min-height: 120px;
        resize: vertical;
      }

      .discussion-list {
        display: flex;
        flex-direction: column;
        gap: var(--space-xl);
      }

      .comment {
        display: flex;
        gap: var(--space-md);
        padding-bottom: var(--space-md);
        border-bottom: 1px solid var(--light-gray);
      }

      .comment:last-child {
        border-bottom: none;
      }

      .comment-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
        flex-shrink: 0;
      }

      .comment-content {
        flex: 1;
      }

      .comment-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: var(--space-xs);
      }

      .comment-author {
        font-weight: 600;
      }

      .comment-date {
        color: var(--gray);
        font-size: 0.8rem;
      }

      .comment-text {
        margin-bottom: var(--space-sm);
      }

      .comment-actions {
        display: flex;
        gap: var(--space-md);
      }

      .comment-action {
        color: var(--gray);
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        gap: var(--space-xs);
        cursor: pointer;
        transition: var(--transition-fast);
      }

      .comment-action:hover {
        color: var(--primary);
      }

      /* Back Button */
      .back-button {
        display: inline-flex;
        align-items: center;
        gap: var(--space-xs);
        padding: var(--space-sm) var(--space-md);
        background-color: var(--light-gray);
        border-radius: var(--radius-md);
        margin-bottom: var(--space-xl);
        transition: var(--transition-fast);
      }

      .back-button:hover {
        background-color: var(--gray);
        color: var(--white);
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        opacity: 0;
        transition: opacity var(--transition-normal);
      }

      .modal.show {
        display: flex;
        opacity: 1;
      }

      .modal-content {
        background-color: var(--white);
        border-radius: var(--radius-lg);
        width: 100%;
        max-width: 500px;
        padding: var(--space-xl);
        box-shadow: var(--shadow-lg);
        transform: translateY(20px);
        transition: transform var(--transition-normal);
      }

      .modal.show .modal-content {
        transform: translateY(0);
      }

      .modal-content h3 {
        font-size: 1.5rem;
        margin-bottom: var(--space-md);
        text-align: center;
      }

      .form-actions {
        display: flex;
        gap: var(--space-md);
        margin-top: var(--space-lg);
      }

      /* Responsive Styles */
      @media (max-width: 768px) {
        .header-container {
          flex-direction: column;
          align-items: flex-start;
          gap: var(--space-md);
        }

        .course-progress,
        .enroll-section {
          width: 100%;
        }

        .course-content {
          padding: var(--space-lg);
        }

        .content-footer {
          flex-direction: column;
          gap: var(--space-sm);
        }

        .discussion-section {
          padding: var(--space-lg);
        }
      }

      @media (max-width: 576px) {
        .course-header {
          padding: var(--space-lg) 0;
        }

        .course-title h1 {
          font-size: 1.5rem;
        }

        .content-header h2 {
          font-size: 1.3rem;
        }

        .content-meta {
          flex-direction: column;
          gap: var(--space-xs);
        }
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <!-- Course Header -->
    <header class="course-header">
      <div class="container">
        <div class="header-container">
          <div class="course-title">
            <h1>Creative Art Design</h1>
            <p id="moduleTitle">Modul 3: Komposisi Visual</p>
          </div>
          <div id="progressSection" class="course-progress">
            <div class="progress-text">
              <span>Progress Kursus</span>
              <span>65%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill"></div>
            </div>
            <div class="progress-meta">
              <span>3 dari 10 modul</span>
              <span>8 dari 20 jam</span>
            </div>
          </div>
          <div id="enrollSection" class="enroll-section" style="display: none">
            <div class="course-price">Rp 249.000</div>
            <button class="enroll-btn" id="enrollBtn">
              <i class="fas fa-shopping-cart"></i> Daftar Sekarang
            </button>
          </div>
        </div>
      </div>
    </header>

    <div class="container">
      <div class="course-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar-nav">
          <div class="modules-menu">
            <!-- Module Group 1 -->
            <div class="module-group">
              <div class="group-header active">
                <span>Bagian 1: Dasar-Dasar</span>
                <i class="fas fa-chevron-down"></i>
              </div>
              <ul class="module-items">
                <li class="module-item completed">
                  <div class="item-title">1. Pengantar Art Design</div>
                  <div class="item-duration">30m</div>
                </li>
                <li class="module-item completed">
                  <div class="item-title">2. Teori Warna</div>
                  <div class="item-duration">45m</div>
                </li>
                <li class="module-item active" id="currentModule">
                  <div class="item-title">3. Komposisi Visual</div>
                  <div class="item-duration">1h</div>
                </li>
              </ul>
            </div>

            <!-- Module Group 2 -->
            <div class="module-group">
              <div class="group-header">
                <span>Bagian 2: Teknik Inti</span>
                <i class="fas fa-chevron-down"></i>
              </div>
              <ul class="module-items">
                <li class="module-item" id="lockedModule1">
                  <div class="item-title">4. Tipografi</div>
                  <div class="item-duration">1h 15m</div>
                  <div class="item-lock">
                    <i class="fas fa-lock"></i>
                    <span>Terlock</span>
                  </div>
                </li>
                <li class="module-item" id="lockedModule2">
                  <div class="item-title">5. Alat dan Media Desain</div>
                  <div class="item-duration">1h 30m</div>
                  <div class="item-lock">
                    <i class="fas fa-lock"></i>
                    <span>Terlock</span>
                  </div>
                </li>
              </ul>
            </div>

            <!-- Module Group 3 -->
            <div class="module-group">
              <div class="group-header">
                <span>Bagian 3: Aplikasi Praktis</span>
                <i class="fas fa-chevron-down"></i>
              </div>
              <ul class="module-items">
                <li class="module-item locked">
                  <div class="item-title">6. Desain untuk Media Digital</div>
                  <div class="item-duration">2h</div>
                  <div class="item-lock">
                    <i class="fas fa-lock"></i>
                    <span>Terlock</span>
                  </div>
                </li>
                <li class="module-item locked">
                  <div class="item-title">7. Branding dan Identitas Visual</div>
                  <div class="item-duration">2h 30m</div>
                  <div class="item-lock">
                    <i class="fas fa-lock"></i>
                    <span>Terlock</span>
                  </div>
                </li>
                <li class="module-item locked">
                  <div class="item-title">8. Desain UI/UX Dasar</div>
                  <div class="item-duration">3h</div>
                  <div class="item-lock">
                    <i class="fas fa-lock"></i>
                    <span>Terlock</span>
                  </div>
                </li>
              </ul>
            </div>

            <!-- Module Group 4 -->
            <div class="module-group">
              <div class="group-header">
                <span>Bagian 4: Proyek Akhir</span>
                <i class="fas fa-chevron-down"></i>
              </div>
              <ul class="module-items">
                <li class="module-item locked">
                  <div class="item-title">9. Proyek Ilustrasi Digital</div>
                  <div class="item-duration">3h 30m</div>
                  <div class="item-lock">
                    <i class="fas fa-lock"></i>
                    <span>Terlock</span>
                  </div>
                </li>
                <li class="module-item locked">
                  <div class="item-title">10. Portofolio dan Presentasi</div>
                  <div class="item-duration">4h</div>
                  <div class="item-lock">
                    <i class="fas fa-lock"></i>
                    <span>Terlock</span>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </aside>

        <!-- Main Content -->
        <main class="course-content">
          <div class="content-header">
            <h2 class="contentTitle">
              Komposisi Visual: Prinsip Penataan Elemen dalam Karya Seni
            </h2>
            <div class="content-meta">
              <span><i class="far fa-clock"></i> 1 jam pembelajaran</span>
              <span><i class="fas fa-chart-line"></i> Tingkat: Menengah</span>
              <span
                ><i class="far fa-calendar-alt"></i> Terakhir diakses: Hari
                ini</span
              >
            </div>
          </div>

          <div class="content-body">
            <div class="video-container">
              <!-- Video placeholder - would be replaced with actual video embed -->
              <iframe
                src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0"
                allowfullscreen
                id="courseVideo"
              ></iframe>
              <div class="preview-overlay" id="previewOverlay">
                <i class="fas fa-lock"></i>
                <h3>Konten Terkunci</h3>
                <p>
                  Daftar sekarang untuk mengakses semua materi kursus ini dan
                  mulai belajar!
                </p>
                <button class="btn btn-primary" id="enrollFromPreview">
                  Daftar Sekarang
                </button>
              </div>
            </div>

            <h3 class="material-title">Pengantar Komposisi Visual</h3>
            <p>
              Komposisi visual adalah penyusunan elemen-elemen seni dan desain
              menjadi satu kesatuan yang harmonis. Prinsip komposisi membantu
              menciptakan karya yang seimbang, menarik, dan efektif dalam
              menyampaikan pesan.
            </p>

            <h3>Prinsip Dasar Komposisi</h3>
            <p>
              1. <strong>Keseimbangan (Balance)</strong>: Distribusi visual yang
              merata dari elemen-elemen desain. Keseimbangan bisa simetris,
              asimetris, atau radial.
            </p>
            <p>
              2. <strong>Penekanan (Emphasis)</strong>: Menciptakan titik fokus
              yang menarik perhatian pemirsa ke bagian terpenting karya.
            </p>
            <p>
              3. <strong>Gerakan (Movement)</strong>: Penggunaan elemen untuk
              membimbing mata pemirsa melalui karya.
            </p>
            <p>
              4. <strong>Irama (Rhythm)</strong>: Pengulangan elemen untuk
              menciptakan kesan gerakan atau pola.
            </p>
            <p>
              5. <strong>Kesatuan (Unity)</strong>: Hubungan harmonis antara
              semua bagian karya seni.
            </p>

            <div class="resources-section" id="resourcesSection">
              <h3><i class="fas fa-paperclip"></i> Materi Pendukung</h3>
              <div class="resource-item">
                <div class="resource-icon">
                  <i class="fas fa-file-pdf"></i>
                </div>
                <div class="resource-info">
                  <h4>Slide Presentasi Komposisi Visual</h4>
                  <p>PDF • 2.4 MB</p>
                </div>
                <a href="#" class="download-btn">
                  <i class="fas fa-download"></i>
                </a>
              </div>
              <div class="resource-item">
                <div class="resource-icon">
                  <i class="fas fa-file-image"></i>
                </div>
                <div class="resource-info">
                  <h4>Contoh Komposisi Visual</h4>
                  <p>ZIP • 10.2 MB</p>
                </div>
                <a href="#" class="download-btn">
                  <i class="fas fa-download"></i>
                </a>
              </div>
            </div>

            <div class="completion-section" id="completionSection">
              <div class="checkbox-container">
                <input type="checkbox" id="markComplete" checked />
                <span class="custom-checkbox">
                  <i class="fas fa-check"></i>
                </span>
                <label for="markComplete">Tandai sebagai selesai</label>
              </div>
            </div>
          </div>

          <!-- [Previous HTML remains the same until the content-body section] -->

          <div class="content-body" id="dynamicContent">
            <!-- Content will be loaded dynamically here -->
          </div>

          <div class="content-footer">
            <a href="#" class="btn btn-outline">
              <i class="fas fa-arrow-left"></i> Sebelumnya
            </a>
            <a href="#" class="btn btn-primary" id="nextButton">
              Selanjutnya <i class="fas fa-arrow-right"></i>
            </a>
          </div>
        </main>
      </div>

      <!-- Subscription Section (Hidden when enrolled) -->
      <div class="subscription-section" id="subscriptionSection">
        <div class="section-title">
          <h2>Mulai Belajar Sekarang</h2>
          <p>
            Berlangganan untuk mengakses semua materi kursus dan fitur premium
          </p>
        </div>

        <div class="pricing-grid">
          <div class="plan-card">
            <h3>Perbulan</h3>
            <p class="price">Rp250.000 <span>/bulan</span></p>
            <p class="sub-price">Akses semua kursus selama 1 bulan</p>

            <ul class="benefits">
              <li>Akses materi tanpa batas</li>
              <li>Materi berkualitas tinggi</li>
              <li>Diskusi langsung dengan tutor</li>
              <li>Sertifikat penyelesaian</li>
            </ul>

            <div class="button-group">
              <button class="btn btn-primary btn-subscribe" data-plan="monthly">
                Berlangganan
              </button>
            </div>
          </div>

          <div class="plan-card popular">
            <h3>Pertahun</h3>
            <p class="price">Rp900.000 <span>/tahun</span></p>
            <p class="sub-price">Akses semua kursus selama 1 tahun</p>

            <ul class="benefits">
              <li>Hemat 70% dibanding bulanan</li>
              <li>Materi berkualitas tinggi</li>
              <li>Akses tanpa batas ke semua kursus</li>
              <li>Diskusi langsung dengan tutor</li>
              <li>Sertifikat penyelesaian</li>
            </ul>

            <div class="button-group">
              <button class="btn btn-primary btn-subscribe" data-plan="yearly">
                Berlangganan
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Payment Modal -->
      <div class="modal" id="paymentModal">
        <div class="modal-content">
          <form id="paymentForm">
            <h3>Form Pembayaran</h3>

            <div class="form-group">
              <label for="nominal">Nominal Pembayaran:</label>
              <input type="text" id="nominal" readonly />
            </div>

            <div class="form-group">
              <label for="metode">Metode Pembayaran:</label>
              <select id="metode" required>
                <option value="">Pilih metode</option>
                <option value="transfer">Transfer Bank</option>
                <option value="gopay">Gopay</option>
                <option value="shopeepay">Shopee Pay</option>
                <option value="paypal">Paypal</option>
              </select>
            </div>

            <div class="form-group">
              <label for="voucher">Kode Voucher (opsional):</label>
              <input type="text" id="voucher" />
            </div>

            <div class="form-group checkbox">
              <input type="checkbox" id="confirm" />
              <label for="confirm">Saya menyetujui syarat dan ketentuan</label>
            </div>

            <div class="form-actions">
              <button
                type="submit"
                class="btn btn-primary"
                id="bayarBtn"
                disabled
              >
                Bayar Sekarang
              </button>
              <button type="button" class="btn btn-outline" id="closeModal">
                Tutup
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Back Button -->
      <a href="courses.html" class="back-button">
        <i class="fas fa-arrow-left"></i>
        <span>Kembali ke Daftar Kursus</span>
      </a>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", async function () {
        // Get course ID from URL
        const id = new URLSearchParams(window.location.search).get("id");
        if (!id) {
          alert("Course ID not provided");
          // window.location.href = "/courses.html";
          return;
        }

        // Fetch course data
        try {

          const response = await fetch(`http://localhost:3000/api/learner/courses/${id}`,
            {
              method: "GET",
              headers: {
                Authorization: `Bearer ${localStorage.getItem("token")}`,
              },
            }
          );
          // const response = await fetch(`/api/learner/courses/${courseId}`);
          if (!response.ok) throw new Error("Failed to fetch course");
          const course = await response.json();

          // Update UI
          document.querySelector(".course-price").textContent =
            `Rp ${course.price.toLocaleString()}`;
          document.querySelector(".course-title h1").textContent = course.title;
          document.querySelector(".course-title p").textContent =
            course.description.substring(0, 100) + "...";

          // Check if user is enrolled
          const isEnrolled = await checkEnrollment(id);
          initializeView(isEnrolled);

          // Load materials
          loadMaterials(id, isEnrolled);
        } catch (error) {
          console.error(error);
          alert("Failed to load course data");
        }

        // Event listeners
        document
          .getElementById("enrollBtn")
          ?.addEventListener("click", enrollInCourse);
        document
          .getElementById("enrollFromPreview")
          ?.addEventListener("click", enrollInCourse);
      });

      async function checkEnrollment(courseId) {
        try {
            console.log("Masuk ke getUserTransactions");

          const response = await fetch(`http://localhost:3000/api/transaction/transactions`,
          
            {
              method: "GET",
              headers: {
                
                Authorization: `Bearer ${localStorage.getItem("token")}`,
              },
            }
          );
          
          // const response = await fetch("/api/transactions", {
          //   headers: { "x-auth-token": localStorage.getItem("token") },
          // });
          if (!response.ok) return false;

          const transactions = await response.json();
          return transactions.some((t) => t.id_course === courseId);
        } catch (error) {
          console.error(error);
          return false;
        }
      }

      async function loadMaterials(courseId, isEnrolled) {
        try {

          const response = await fetch(`http://localhost:3000/api/learner/courses/${courseId}/materials`,
            {
              method: "GET",
              headers: {
                Authorization: `Bearer ${localStorage.getItem("token")}`,
              },
            }
          );
          // const response = await fetch(`/api/learner/courses/${courseId}/materials`);
          if (!response.ok) throw new Error("Failed to fetch materials");

          const materials = await response.json();
          renderMaterials(materials, isEnrolled);
        } catch (error) {
          console.error(error);
        }
      }

      function renderMaterials(materials, isEnrolled) {
        const modulesMenu = document.querySelector(".modules-menu");

        // Group materials by topic/section
        const sections = {};
        materials.forEach((material) => {
          if (!sections[material.topic]) {
            sections[material.topic] = [];
          }
          sections[material.topic].push(material);
        });

        // Clear existing content
        modulesMenu.innerHTML = "";

        // Create sections
        Object.entries(sections).forEach(([topic, mats], index) => {
          const isFirstSection = index === 0;

          const sectionHTML = `
      <div class="module-group">
        <div class="group-header ${isFirstSection ? "active" : ""}">
          <span>${topic}</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <ul class="module-items" ${
          isFirstSection ? 'style="max-height: 1000px;"' : ""
        }>
          ${mats
            .map(
              (mat, matIndex) => `
            <li class="module-item ${
              matIndex === 0 && isFirstSection ? "active" : ""
            } 
                ${!isEnrolled && !mat.is_free ? "locked" : ""}" 
                data-id="${mat.id_material}">
              <div class="item-title">${mat.sequence_order}. ${mat.title}</div>
              <div class="item-duration">${formatDuration(mat.duration)}</div>
              ${
                !isEnrolled && !mat.is_free
                  ? `
                <div class="item-lock">
                  <i class="fas fa-lock"></i>
                  <span>Terlock</span>
                </div>
              `
                  : ""
              }
            </li>
          `
            )
            .join("")}
        </ul>
      </div>
    `;

          modulesMenu.insertAdjacentHTML("beforeend", sectionHTML);
        });

        // Add click handlers
        document.querySelectorAll(".module-item").forEach((item) => {
          item.addEventListener("click", function () {
            if (this.classList.contains("locked")) {
              alert("Anda perlu berlangganan untuk mengakses modul ini");
              return;
            }

            // Update active item
            document
              .querySelectorAll(".module-item")
              .forEach((i) => i.classList.remove("active"));
            this.classList.add("active");

            // Load material content
            const materialId = this.getAttribute("data-id");
            // console.log("Loading material ID:", materialId);
            loadMaterialContent(materialId);
          });
        });

        // Add section toggle handlers
        document.querySelectorAll(".group-header").forEach((header) => {
          header.addEventListener("click", function () {
            this.classList.toggle("active");
            const icon = this.querySelector("i");
            icon.classList.toggle("fa-chevron-down");
            icon.classList.toggle("fa-chevron-up");
          });
        });
      }

      async function loadMaterialContent(materialId) {
        try {
          console.log("Fetching material ID:", materialId);
          const response = await fetch(`http://localhost:3000/api/learner/materials/${materialId}`,
            {
              method: "GET",
              headers: {
                Authorization: `Bearer ${localStorage.getItem("token")}`,
              },
            }
          );
          // const response = await fetch(`/api/learner/materials/${materialId}`);
          if (!response.ok) throw new Error("Failed to fetch material");

          const material = await response.json();
          renderMaterialContent(material);
        } catch (error) {
          console.error(error);
        }
      }
function renderMaterialContent(material) {
  // // Pastikan title tampil di elemen yang benar
  // const contentTitle = document.getElementById("contentTitle");
  // if (contentTitle) contentTitle.textContent = material.title;

  document.querySelector("contentTitle").textContent = material.title;

  const dynamicContent = document.getElementById("dynamicContent");
  if (!dynamicContent) return;

  // Parse JSON jika content masih string
  let contentObj = material.content;
  if (typeof contentObj === "string") {
    try {
      contentObj = JSON.parse(contentObj);
    } catch (e) {
      dynamicContent.innerHTML = "<div class='content-block'>Format materi tidak valid.</div>";
      return;
    }
  }

  // Clear existing content
  dynamicContent.innerHTML = "";

  // Render content blocks jika ada
  if (contentObj && Array.isArray(contentObj.blocks) && contentObj.blocks.length > 0) {
    contentObj.blocks.forEach((block) => {
      let blockHTML = "";
      switch (block.type) {
        case "text":
          blockHTML = `<div class="content-block">${block.content}</div>`;
          break;
        case "image":
          blockHTML = `
            <div class="content-block image-block">
              <img src="${block.content}" alt="${block.metadata?.alt || ""}">
            </div>
          `;
          break;
        case "video":
          blockHTML = `
            <div class="content-block video-block">
              <div class="video-container">
                <iframe src="${getVideoEmbedUrl(
                  block.content
                )}" allowfullscreen></iframe>
              </div>
            </div>
          `;
          break;
        case "heading":
          blockHTML = `<div class="content-block heading-block"><h3>${block.content}</h3></div>`;
          break;
        default:
          blockHTML = `<div class="content-block">${block.content || ""}</div>`;
      }
      dynamicContent.insertAdjacentHTML("beforeend", blockHTML);
    });
  } else {
    dynamicContent.innerHTML = "<div class='content-block'>Materi kosong.</div>";
  }
}

      function formatDuration(minutes) {
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        return hours > 0 ? `${hours}h ${mins}m` : `${mins}m`;
      }

      function getVideoEmbedUrl(url) {
        if (!url) return "";

        if (url.includes("youtube.com") || url.includes("youtu.be")) {
          const videoId = url.match(
            /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/
          );
          if (videoId && videoId[1]) {
            return `https://www.youtube.com/embed/${videoId[1]}`;
          }
        }

        return url;
      }

      async function enrollInCourse() {
        const id = new URLSearchParams(window.location.search).get("id");
        if (!id) return;

        try {
          const response = await fetch("http://localhost:3000/api/transaction/transactions", {
            method: "POST",
            headers: {
                "Content-Type": "application/json", // <- jangan lupa ini ya!
                Authorization: `Bearer ${localStorage.getItem("token")}`,
            },
            body: JSON.stringify({
              id,
              paymentMethod: "transfer", // Default for demo
              amount:
                document
                  .querySelector(".course-price")
                  ?.textContent.replace(/\D/g, "") || 0,
            }),
          });

          if (!response.ok) throw new Error("Enrollment failed");

          const transaction = await response.json();
          alert("Enrollment successful!");
          initializeView(true); // Update UI to enrolled state
        } catch (error) {
          console.error(error);
          alert("Failed to enroll: " + error.message);
        }
      }

      function initializeView(isEnrolled) {
        const elements = {
          progressSection: document.getElementById("progressSection"),
          enrollSection: document.getElementById("enrollSection"),
          subscriptionSection: document.getElementById("subscriptionSection"),
          previewOverlay: document.getElementById("previewOverlay"),
          resourcesSection: document.getElementById("resourcesSection"),
          completionSection: document.getElementById("completionSection"),
          nextButton: document.getElementById("nextButton"),
          lockedModules: document.querySelectorAll(".module-item.locked"),
        };

        if (isEnrolled) {
          elements.progressSection.style.display = "block";
          elements.enrollSection.style.display = "none";
          elements.subscriptionSection.style.display = "none";
          elements.previewOverlay.style.display = "none";
          elements.resourcesSection.style.display = "block";
          elements.completionSection.style.display = "flex";

          elements.lockedModules.forEach((module) => {
            module.classList.remove("locked");
            const lockElement = module.querySelector(".item-lock");
            if (lockElement) lockElement.style.display = "none";
          });

          elements.nextButton.href = "#"; // Set proper next material link
          elements.nextButton.style.opacity = "1";
          elements.nextButton.style.cursor = "pointer";
        } else {
          elements.progressSection.style.display = "none";
          elements.enrollSection.style.display = "block";
          elements.subscriptionSection.style.display = "block";
          elements.previewOverlay.style.display = "flex";
          elements.resourcesSection.style.display = "none";
          elements.completionSection.style.display = "none";

          elements.nextButton.removeAttribute("href");
          elements.nextButton.style.opacity = "0.5";
          elements.nextButton.style.cursor = "not-allowed";
        }
      }
    </script>
  </body>
</html>
